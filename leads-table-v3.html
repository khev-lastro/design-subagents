<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Leads — Lais da Imobiliária</title>
<style>
  /*
   * ═══════════════════════════════════════════════════════════════
   * v3 — AI Smart Suggestion Research Findings Applied
   *
   * Inherits all v2 Practical UI principles (1-17), plus:
   *
   * 18. Confidence indicators on suggestions (Linear pattern)
   * 19. "Por que estou vendo isso?" reasoning links (explainability)
   * 20. Thumbs up/down feedback on suggestion cards (trust loop)
   * 21. Fatigue counter — "2 de 3 sugestões" (fatigue management)
   * 22. Snooze "Lembrar depois" alongside dismiss (defer ≠ reject)
   * 23. Agentic one-click execute + undo toast (Stage 2 execution)
   * ═══════════════════════════════════════════════════════════════
   */

  /* ── Reset & Base ── */
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --purple-50: #faf5ff;
    --purple-100: #f3e8ff;
    --purple-200: #e9d5ff;
    --purple-300: #d8b4fe;
    --purple-400: #c084fc;
    --purple-500: #a855f7;
    --purple-600: #9333ea;
    --purple-700: #7e22ce;
    --purple-800: #6b21a8;
    --purple-900: #581c87;

    --gray-25: #fcfcfd;
    --gray-50: #f9fafb;
    --gray-100: #f3f4f6;
    --gray-200: #e5e7eb;
    --gray-300: #d1d5db;
    --gray-400: #9ca3af;
    --gray-500: #6b7280;
    --gray-600: #4b5563;
    --gray-700: #374151;
    --gray-800: #1f2937;
    --gray-900: #111827;

    --green-50: #f0fdf4;
    --green-100: #dcfce7;
    --green-600: #16a34a;
    --green-700: #15803d;

    --amber-50: #fffbeb;
    --amber-100: #fef3c7;
    --amber-500: #f59e0b;
    --amber-600: #d97706;
    --amber-700: #b45309;

    --red-50: #fef2f2;
    --red-100: #fee2e2;
    --red-500: #ef4444;
    --red-600: #dc2626;

    --blue-50: #eff6ff;
    --blue-100: #dbeafe;
    --blue-500: #3b82f6;
    --blue-600: #2563eb;

    --white: #ffffff;
    --shadow-xs: 0 1px 2px rgba(0,0,0,0.04);
    --shadow-sm: 0 1px 3px rgba(0,0,0,0.06), 0 1px 2px rgba(0,0,0,0.04);
    --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.06), 0 2px 4px -2px rgba(0,0,0,0.04);
    --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.06), 0 4px 6px -4px rgba(0,0,0,0.04);
    --shadow-xl: 0 20px 25px -5px rgba(0,0,0,0.06), 0 8px 10px -6px rgba(0,0,0,0.04);

    --sp-1: 4px;
    --sp-2: 8px;
    --sp-3: 12px;
    --sp-4: 16px;
    --sp-5: 20px;
    --sp-6: 24px;
    --sp-8: 32px;
    --sp-10: 40px;
    --sp-12: 48px;

    --radius-sm: 6px;
    --radius-md: 8px;
    --radius-lg: 12px;
    --radius-xl: 16px;

    --text-xs: 11px;
    --text-sm: 13px;
    --text-base: 14px;
    --text-lg: 16px;
    --text-xl: 20px;
    --text-2xl: 24px;

    --leading-tight: 1.25;
    --leading-normal: 1.5;

    --tracking-tight: -0.01em;
    --tracking-normal: 0;
    --tracking-wide: 0.02em;
  }

  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Inter', 'Segoe UI', sans-serif;
    font-size: var(--text-base);
    line-height: var(--leading-normal);
    color: var(--gray-800);
    background: var(--gray-50);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  :focus-visible {
    outline: 2px solid var(--purple-400);
    outline-offset: 2px;
  }

  :focus:not(:focus-visible) { outline: none; }

  .app { display: flex; min-height: 100vh; }

  /* ── Sidebar ── */
  .sidebar {
    width: 240px;
    min-width: 240px;
    background: var(--white);
    border-right: 1px solid var(--gray-100);
    display: flex;
    flex-direction: column;
    padding: var(--sp-6) 0;
    position: sticky;
    top: 0;
    height: 100vh;
  }

  .sidebar-brand {
    padding: 0 var(--sp-5) var(--sp-6);
    border-bottom: 1px solid var(--gray-100);
    margin-bottom: var(--sp-4);
    position: relative;
  }

  .sidebar-collapse {
    position: absolute;
    right: -12px;
    top: 8px;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background: var(--white);
    border: 1px solid var(--gray-200);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 2;
    transition: all 0.15s ease;
    color: var(--gray-400);
  }

  .sidebar-collapse:hover {
    background: var(--gray-50);
    border-color: var(--gray-300);
    color: var(--gray-600);
  }

  .sidebar-collapse svg { width: 14px; height: 14px; }

  .sidebar-brand h2 {
    font-size: var(--text-base);
    font-weight: 600;
    color: var(--gray-900);
    letter-spacing: var(--tracking-tight);
    line-height: var(--leading-tight);
  }

  .sidebar-brand .brand-phone {
    font-size: var(--text-sm);
    color: var(--gray-500);
    margin-top: var(--sp-1);
    font-weight: 400;
    font-variant-numeric: tabular-nums;
  }

  .sidebar-nav {
    flex: 1;
    padding: 0 var(--sp-3);
    display: flex;
    flex-direction: column;
    gap: var(--sp-1);
  }

  .nav-item {
    display: flex;
    align-items: center;
    gap: var(--sp-3);
    padding: var(--sp-2) var(--sp-3);
    border-radius: var(--radius-md);
    color: var(--gray-500);
    text-decoration: none;
    font-size: var(--text-sm);
    font-weight: 500;
    transition: all 0.15s ease;
    cursor: pointer;
    position: relative;
  }

  .nav-item:hover { color: var(--gray-700); background: var(--gray-50); }

  .nav-item.active {
    color: var(--purple-700);
    background: var(--purple-50);
    font-weight: 600;
  }

  .nav-item.active::before {
    content: '';
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 3px;
    height: 20px;
    background: var(--purple-600);
    border-radius: 0 2px 2px 0;
  }

  .nav-item svg { width: 18px; height: 18px; flex-shrink: 0; opacity: 0.7; }
  .nav-item.active svg { opacity: 1; }

  .sidebar-footer {
    padding: var(--sp-4) var(--sp-5) 0;
    border-top: 1px solid var(--gray-100);
    margin-top: auto;
  }

  .user-profile {
    display: flex;
    align-items: center;
    gap: var(--sp-3);
    padding: var(--sp-2) 0;
    cursor: pointer;
    border-radius: var(--radius-md);
    transition: background 0.15s ease;
  }

  .user-profile:hover { background: var(--gray-50); }

  .user-avatar {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background: var(--purple-100);
    color: var(--purple-700);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--text-sm);
    font-weight: 600;
    flex-shrink: 0;
  }

  .user-info { flex: 1; min-width: 0; }

  .user-name {
    font-size: var(--text-sm);
    font-weight: 500;
    color: var(--gray-800);
    line-height: var(--leading-tight);
  }

  .user-role {
    font-size: var(--text-xs);
    color: var(--gray-500);
    line-height: var(--leading-tight);
  }

  .user-profile .chevron { width: 16px; height: 16px; color: var(--gray-300); }

  /* ── Main Content ── */
  .main {
    flex: 1;
    min-width: 0;
    display: flex;
    flex-direction: column;
  }

  .header {
    padding: var(--sp-8) var(--sp-8) var(--sp-2);
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    gap: var(--sp-4);
  }

  .header-left h1 {
    font-size: var(--text-2xl);
    font-weight: 700;
    color: var(--gray-900);
    letter-spacing: -0.02em;
    line-height: var(--leading-tight);
  }

  .header-left p {
    font-size: var(--text-sm);
    color: var(--gray-500);
    margin-top: var(--sp-1);
  }

  .header-actions {
    display: flex;
    align-items: center;
    gap: var(--sp-2);
    margin-top: var(--sp-1);
  }

  /* ── Buttons ── */
  .btn {
    display: inline-flex;
    align-items: center;
    gap: var(--sp-2);
    padding: var(--sp-2) var(--sp-3);
    border-radius: var(--radius-sm);
    font-size: var(--text-sm);
    font-weight: 500;
    cursor: pointer;
    transition: all 0.15s ease;
    border: 1px solid transparent;
    white-space: nowrap;
    line-height: var(--leading-tight);
    min-height: 36px;
  }

  .btn svg { width: 16px; height: 16px; flex-shrink: 0; }

  .btn-ghost {
    background: var(--white);
    border-color: var(--gray-200);
    color: var(--gray-600);
  }

  .btn-ghost:hover {
    background: var(--gray-50);
    border-color: var(--gray-300);
    color: var(--gray-700);
  }

  .btn-primary { background: var(--purple-600); color: var(--white); }
  .btn-primary:hover { background: var(--purple-700); }
  .btn-primary:active { background: var(--purple-800); }

  .btn-secondary {
    background: var(--white);
    border-color: var(--purple-200);
    color: var(--purple-600);
  }

  .btn-secondary:hover {
    background: var(--purple-50);
    border-color: var(--purple-300);
  }

  .btn-outline-primary {
    background: var(--white);
    border-color: var(--purple-200);
    color: var(--purple-600);
  }

  .btn-outline-primary:hover {
    background: var(--purple-50);
    border-color: var(--purple-300);
  }

  /* ── Table Area ── */
  .table-section {
    flex: 1;
    padding: var(--sp-5) var(--sp-8) 0;
    display: flex;
    flex-direction: column;
    min-height: 0;
  }

  .table-meta {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: var(--sp-4);
  }

  .table-count {
    font-size: var(--text-sm);
    color: var(--gray-500);
    font-weight: 400;
  }

  .table-count strong {
    color: var(--gray-900);
    font-weight: 600;
  }

  .table-container {
    background: var(--white);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-lg);
    overflow: hidden;
    flex: 1;
    display: flex;
    flex-direction: column;
  }

  .table-scroll { flex: 1; overflow-y: auto; }

  table { width: 100%; border-collapse: collapse; }

  thead { position: sticky; top: 0; z-index: 1; }
  thead tr { background: var(--gray-50); }

  th {
    padding: var(--sp-3) var(--sp-4);
    text-align: left;
    font-size: var(--text-xs);
    font-weight: 500;
    color: var(--gray-500);
    border-bottom: 1px solid var(--gray-200);
    white-space: nowrap;
  }

  th.col-check { width: 44px; padding-right: 0; }
  th.col-actions { width: 120px; text-align: right; }

  td {
    padding: 12px 16px;
    border-bottom: 1px solid var(--gray-100);
    vertical-align: middle;
  }

  tr.row { transition: background 0.1s ease; }
  tr.row:hover { background: var(--purple-50); }
  tr.row:last-child td { border-bottom: none; }

  /* Checkbox */
  .check { display: flex; align-items: center; justify-content: center; }

  .check input[type="checkbox"] {
    width: 16px;
    height: 16px;
    border: 1.5px solid var(--gray-300);
    border-radius: 4px;
    appearance: none;
    -webkit-appearance: none;
    cursor: pointer;
    transition: all 0.15s ease;
    background: var(--white);
  }

  .check input[type="checkbox"]:hover { border-color: var(--purple-400); }

  .check input[type="checkbox"]:checked {
    background: var(--purple-600);
    border-color: var(--purple-600);
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3E%3C/svg%3E");
  }

  /* Cell content */
  .lead-cell { display: flex; flex-direction: column; gap: 2px; }

  .lead-name {
    font-weight: 600;
    color: var(--gray-900);
    font-size: var(--text-lg);
    line-height: var(--leading-tight);
  }

  .lead-status {
    display: inline-flex;
    align-items: center;
    gap: var(--sp-1);
    font-size: var(--text-xs);
    font-weight: 500;
    padding: 1px 0;
  }

  .lead-status .dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    flex-shrink: 0;
  }

  .lead-status.status-atendido .dot { background: var(--green-600); }
  .lead-status.status-atendido { color: var(--green-700); }

  .lead-status.status-em-atendimento .dot {
    background: transparent;
    border: 1.5px solid var(--amber-600);
  }
  .lead-status.status-em-atendimento { color: var(--amber-700); }

  .lead-status.status-novo .dot {
    background: var(--blue-600);
    border-radius: 1px;
    transform: rotate(45deg);
  }
  .lead-status.status-novo { color: var(--blue-600); }

  .contact-cell { display: flex; flex-direction: column; gap: 2px; }

  .contact-phone {
    font-size: var(--text-sm);
    color: var(--gray-700);
    font-variant-numeric: tabular-nums;
    font-weight: 500;
  }

  .contact-email {
    font-size: var(--text-xs);
    color: var(--gray-500);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 200px;
  }

  .property-cell { display: flex; flex-direction: column; gap: 2px; }

  .property-type { font-size: var(--text-sm); color: var(--gray-700); font-weight: 500; }
  .property-ref { font-size: var(--text-xs); color: var(--gray-500); font-variant-numeric: tabular-nums; }
  .property-empty { color: var(--gray-300); font-size: var(--text-sm); }
  .channel-cell { display: flex; flex-direction: column; gap: 2px; }
  .channel-name { font-size: var(--text-sm); color: var(--gray-700); font-weight: 500; }
  .channel-date { font-size: var(--text-xs); color: var(--gray-500); font-variant-numeric: tabular-nums; }

  .crm-cell { display: flex; flex-direction: column; gap: var(--sp-1); }

  .crm-badge {
    display: inline-flex;
    align-items: center;
    gap: var(--sp-1);
    font-size: var(--text-xs);
    font-weight: 500;
    padding: 2px 8px;
    border-radius: 999px;
    width: fit-content;
  }

  .crm-badge.sent { background: var(--green-50); color: var(--green-700); }
  .crm-badge.not-sent { background: var(--amber-50); color: var(--amber-700); }
  .crm-badge.error { background: var(--red-50); color: var(--red-600); }

  .crm-detail {
    font-size: var(--text-xs);
    color: var(--gray-500);
    max-width: 180px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .row-actions {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: var(--sp-1);
    opacity: 0;
    transition: opacity 0.15s ease;
  }

  tr.row:hover .row-actions { opacity: 1; }

  .action-btn {
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--radius-sm);
    border: none;
    background: transparent;
    color: var(--gray-400);
    cursor: pointer;
    transition: all 0.15s ease;
  }

  .action-btn:hover { background: var(--purple-100); color: var(--purple-600); }
  .action-btn:active { background: var(--purple-200); }
  .action-btn svg { width: 16px; height: 16px; }

  /* ── Bottom Bar ── */
  .bottom-bar {
    padding: var(--sp-3) var(--sp-8);
    background: var(--white);
    border-top: 1px solid var(--gray-200);
    display: flex;
    align-items: center;
    gap: var(--sp-3);
  }

  .bottom-bar .selection-count {
    font-size: var(--text-xs);
    color: var(--gray-500);
    font-weight: 500;
    padding-right: var(--sp-3);
    border-right: 1px solid var(--gray-200);
    margin-right: var(--sp-1);
    white-space: nowrap;
    display: none;
  }

  .bottom-bar .bulk-action {
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s ease;
    display: none;
  }

  .bottom-bar.has-selection .selection-count { display: block; }

  .bottom-bar.has-selection .bulk-action {
    display: inline-flex;
    opacity: 1;
    pointer-events: auto;
  }

  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0,0,0,0);
    border: 0;
  }


  /* ═══════════════════════════════════════════
     SMART SUGGESTIONS — Lais Intelligence Layer
     ═══════════════════════════════════════════ */

  /* ── 1. Contextual Insight Banner ── */

  .insight-banner {
    margin: var(--sp-5) var(--sp-8) 0;
    padding: var(--sp-3) var(--sp-4);
    background: var(--white);
    border: 1px solid var(--gray-200);
    border-left: 3px solid var(--amber-500);
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    gap: var(--sp-3);
    box-shadow: var(--shadow-xs);
    animation: bannerIn 0.25s ease;
  }

  .insight-banner[data-type="ai"]     { border-left-color: var(--purple-500); }
  .insight-banner[data-type="urgent"] { border-left-color: var(--amber-500); }
  .insight-banner[data-type="opportunity"] { border-left-color: var(--green-600); }

  @keyframes bannerIn {
    from { opacity: 0; transform: translateY(-4px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  .insight-banner-icon {
    width: 28px;
    height: 28px;
    border-radius: var(--radius-sm);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }

  .insight-banner[data-type="ai"] .insight-banner-icon {
    background: var(--purple-50);
    color: var(--purple-600);
  }

  .insight-banner[data-type="urgent"] .insight-banner-icon {
    background: var(--amber-50);
    color: var(--amber-600);
  }

  .insight-banner[data-type="opportunity"] .insight-banner-icon {
    background: var(--green-50);
    color: var(--green-600);
  }

  .insight-banner-icon svg { width: 14px; height: 14px; }

  .insight-banner-body { flex: 1; min-width: 0; }

  .insight-banner-text {
    font-size: var(--text-sm);
    color: var(--gray-700);
    line-height: var(--leading-normal);
  }

  .insight-banner-text strong {
    font-weight: 600;
    color: var(--gray-900);
  }

  /* [#19] Reasoning link on banners */
  .reasoning-link {
    display: inline-flex;
    align-items: center;
    gap: 3px;
    font-size: var(--text-xs);
    font-weight: 500;
    color: var(--gray-400);
    background: none;
    border: none;
    cursor: pointer;
    padding: 2px 0;
    margin-top: 2px;
    transition: color 0.15s ease;
  }

  .reasoning-link:hover { color: var(--gray-600); }
  .reasoning-link svg { width: 11px; height: 11px; }

  .reasoning-expanded {
    font-size: var(--text-xs);
    color: var(--gray-500);
    line-height: var(--leading-normal);
    margin-top: var(--sp-1);
    padding-top: var(--sp-1);
    border-top: 1px solid var(--gray-100);
    display: none;
  }

  .reasoning-expanded.is-visible { display: block; }

  .insight-banner-action {
    font-size: var(--text-sm);
    font-weight: 600;
    color: var(--purple-600);
    background: none;
    border: none;
    cursor: pointer;
    padding: var(--sp-1) var(--sp-2);
    border-radius: var(--radius-sm);
    transition: all 0.15s ease;
    white-space: nowrap;
    flex-shrink: 0;
  }

  .insight-banner-action:hover {
    background: var(--purple-50);
    color: var(--purple-700);
  }

  .insight-banner-dismiss {
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: none;
    background: transparent;
    color: var(--gray-300);
    cursor: pointer;
    border-radius: var(--radius-sm);
    flex-shrink: 0;
    transition: all 0.15s ease;
  }

  .insight-banner-dismiss:hover {
    background: var(--gray-100);
    color: var(--gray-500);
  }

  .insight-banner-dismiss svg { width: 14px; height: 14px; }


  /* ── 2. Row-Level Nudge ── */

  tr.row.has-nudge { position: relative; }

  tr.row.has-nudge > td:first-child { border-left: 3px solid var(--amber-500); }

  tr.row.has-nudge.nudge-urgent > td:first-child { border-left-color: var(--amber-500); }
  tr.row.has-nudge.nudge-opportunity > td:first-child { border-left-color: var(--green-600); }

  .row-nudge-indicator { position: relative; display: inline-flex; }

  .row-nudge-badge {
    display: inline-flex;
    align-items: center;
    gap: var(--sp-1);
    font-size: var(--text-xs);
    font-weight: 500;
    padding: 2px 8px;
    border-radius: 999px;
    cursor: default;
    margin-top: var(--sp-1);
  }

  .row-nudge-badge.nudge-urgent { background: var(--amber-50); color: var(--amber-700); }
  .row-nudge-badge.nudge-opportunity { background: var(--green-50); color: var(--green-700); }

  .row-nudge-badge svg { width: 10px; height: 10px; }

  /* Nudge popover */
  .row-nudge-popover {
    position: absolute;
    bottom: calc(100% + 8px);
    left: 0;
    width: 280px;
    background: var(--white);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-lg);
    padding: var(--sp-4);
    z-index: 20;
    opacity: 0;
    pointer-events: none;
    transform: translateY(4px);
    transition: all 0.15s ease;
  }

  .row-nudge-indicator:hover .row-nudge-popover {
    opacity: 1;
    pointer-events: auto;
    transform: translateY(0);
  }

  .row-nudge-popover::after {
    content: '';
    position: absolute;
    bottom: -5px;
    left: 20px;
    width: 8px;
    height: 8px;
    background: var(--white);
    border-right: 1px solid var(--gray-200);
    border-bottom: 1px solid var(--gray-200);
    transform: rotate(45deg);
  }

  .nudge-popover-source {
    display: flex;
    align-items: center;
    gap: var(--sp-2);
    font-size: var(--text-xs);
    color: var(--purple-600);
    font-weight: 600;
    margin-bottom: var(--sp-2);
  }

  .nudge-popover-source svg { width: 12px; height: 12px; }

  /* [#18] Confidence badge in nudge popover */
  .nudge-popover-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: var(--sp-2);
  }

  .nudge-popover-text {
    font-size: var(--text-sm);
    color: var(--gray-700);
    line-height: var(--leading-normal);
    margin-bottom: var(--sp-3);
  }

  .nudge-popover-text strong { font-weight: 600; color: var(--gray-900); }

  .nudge-popover-stat {
    display: flex;
    align-items: center;
    gap: var(--sp-2);
    padding: var(--sp-2) var(--sp-3);
    background: var(--gray-50);
    border-radius: var(--radius-sm);
    margin-bottom: var(--sp-3);
  }

  .nudge-popover-stat-value {
    font-size: var(--text-lg);
    font-weight: 700;
    color: var(--gray-900);
    font-variant-numeric: tabular-nums;
    line-height: 1;
  }

  .nudge-popover-stat-value.val-warning { color: var(--amber-600); }
  .nudge-popover-stat-value.val-good { color: var(--green-600); }

  .nudge-popover-stat-label {
    font-size: var(--text-xs);
    color: var(--gray-500);
    line-height: var(--leading-tight);
  }

  .nudge-popover-action {
    width: 100%;
    padding: var(--sp-2);
    background: var(--purple-600);
    color: var(--white);
    border: none;
    border-radius: var(--radius-sm);
    font-size: var(--text-sm);
    font-weight: 500;
    cursor: pointer;
    transition: background 0.15s ease;
    text-align: center;
  }

  .nudge-popover-action:hover { background: var(--purple-700); }


  /* ── 3. Suggestion Cards ── */

  .suggestion-tray {
    position: fixed;
    bottom: var(--sp-6);
    right: var(--sp-6);
    display: flex;
    flex-direction: column-reverse;
    gap: var(--sp-3);
    z-index: 50;
    max-height: calc(100vh - 120px);
    overflow-y: auto;
    pointer-events: none;
  }

  .suggestion-tray > * { pointer-events: auto; }

  /* [#21] Fatigue counter */
  .fatigue-counter {
    font-size: var(--text-xs);
    color: var(--gray-400);
    text-align: right;
    padding: 0 var(--sp-1);
    pointer-events: auto;
    display: none;
  }

  .fatigue-counter.is-visible { display: block; }

  .suggestion-card {
    width: 380px;
    background: var(--white);
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-lg);
    overflow: hidden;
    animation: cardIn 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  }

  @keyframes cardIn {
    from { opacity: 0; transform: translateY(16px) scale(0.97); }
    to   { opacity: 1; transform: translateY(0) scale(1); }
  }

  .suggestion-card-accent {
    height: 3px;
    width: 100%;
  }

  .suggestion-card-accent.accent-ai     { background: var(--purple-500); }
  .suggestion-card-accent.accent-urgent  { background: var(--amber-500); }
  .suggestion-card-accent.accent-green   { background: var(--green-600); }
  .suggestion-card-accent.accent-blue    { background: var(--blue-500); }

  .suggestion-card-inner { padding: var(--sp-5); }

  .suggestion-card-header {
    display: flex;
    align-items: flex-start;
    gap: var(--sp-3);
    margin-bottom: var(--sp-4);
  }

  .suggestion-card-source {
    display: flex;
    align-items: center;
    gap: var(--sp-1);
    font-size: var(--text-xs);
    font-weight: 600;
    margin-bottom: var(--sp-1);
  }

  .suggestion-card-source.source-ai     { color: var(--purple-600); }
  .suggestion-card-source.source-urgent  { color: var(--amber-600); }
  .suggestion-card-source.source-green   { color: var(--green-600); }
  .suggestion-card-source.source-blue    { color: var(--blue-600); }

  .suggestion-card-source svg { width: 12px; height: 12px; }

  /* [#18] Confidence badge */
  .confidence-badge {
    display: inline-flex;
    align-items: center;
    gap: 3px;
    font-size: 10px;
    font-weight: 600;
    padding: 1px 6px;
    border-radius: 999px;
    font-variant-numeric: tabular-nums;
    line-height: 1.4;
    margin-left: var(--sp-2);
  }

  .confidence-badge svg { width: 9px; height: 9px; }

  .confidence-high {
    background: var(--green-50);
    color: var(--green-700);
  }

  .confidence-medium {
    background: var(--amber-50);
    color: var(--amber-700);
  }

  .suggestion-card-icon {
    width: 36px;
    height: 36px;
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }

  .suggestion-card-icon.icon-ai     { background: var(--purple-50); color: var(--purple-600); }
  .suggestion-card-icon.icon-urgent  { background: var(--amber-50); color: var(--amber-600); }
  .suggestion-card-icon.icon-green   { background: var(--green-50); color: var(--green-600); }
  .suggestion-card-icon.icon-blue    { background: var(--blue-50); color: var(--blue-600); }

  .suggestion-card-icon svg { width: 18px; height: 18px; }

  .suggestion-card-content { flex: 1; min-width: 0; }

  .suggestion-card-title {
    font-size: var(--text-sm);
    font-weight: 600;
    color: var(--gray-900);
    line-height: var(--leading-tight);
    margin-bottom: 2px;
  }

  .suggestion-card-desc {
    font-size: var(--text-sm);
    color: var(--gray-500);
    line-height: var(--leading-normal);
  }

  .suggestion-card-close {
    width: 24px;
    height: 24px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: none;
    background: transparent;
    color: var(--gray-300);
    cursor: pointer;
    border-radius: var(--radius-sm);
    flex-shrink: 0;
    margin-top: -2px;
    margin-right: -2px;
    transition: all 0.15s ease;
  }

  .suggestion-card-close:hover {
    background: var(--gray-100);
    color: var(--gray-500);
  }

  .suggestion-card-close svg { width: 14px; height: 14px; }

  /* Data strip */
  .suggestion-card-data {
    background: var(--gray-50);
    border-radius: var(--radius-sm);
    padding: var(--sp-3) var(--sp-4);
    margin-bottom: var(--sp-4);
    display: flex;
    gap: var(--sp-5);
  }

  .data-point { display: flex; flex-direction: column; gap: 2px; }

  .data-point-value {
    font-size: var(--text-lg);
    font-weight: 700;
    color: var(--gray-900);
    font-variant-numeric: tabular-nums;
    line-height: 1;
  }

  .data-point-label {
    font-size: var(--text-xs);
    color: var(--gray-500);
    white-space: nowrap;
  }

  .data-point-value.val-warning { color: var(--amber-600); }
  .data-point-value.val-good { color: var(--green-600); }
  .data-point-value.val-accent { color: var(--purple-600); }

  .data-bar {
    height: 4px;
    background: var(--gray-200);
    border-radius: 2px;
    overflow: hidden;
    margin-top: var(--sp-1);
    width: 80px;
  }

  .data-bar-fill {
    height: 100%;
    border-radius: 2px;
    transition: width 0.6s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .data-bar-fill.fill-warning { background: var(--amber-500); }
  .data-bar-fill.fill-good    { background: var(--green-600); }
  .data-bar-fill.fill-accent  { background: var(--purple-500); }

  /* Card footer actions */
  .suggestion-card-actions {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--sp-2);
  }

  /* [#20] Feedback buttons */
  .suggestion-feedback {
    display: flex;
    align-items: center;
    gap: 2px;
  }

  .feedback-btn {
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: none;
    background: transparent;
    color: var(--gray-300);
    cursor: pointer;
    border-radius: var(--radius-sm);
    transition: all 0.15s ease;
  }

  .feedback-btn:hover { color: var(--gray-500); background: var(--gray-50); }
  .feedback-btn.active { color: var(--purple-600); background: var(--purple-50); }
  .feedback-btn svg { width: 14px; height: 14px; }

  .suggestion-card-action-group {
    display: flex;
    align-items: center;
    gap: var(--sp-2);
  }

  .suggestion-card-actions .btn-sm {
    padding: 6px var(--sp-3);
    font-size: var(--text-sm);
    font-weight: 500;
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: all 0.15s ease;
    border: none;
  }

  .btn-sm-ghost {
    background: transparent;
    color: var(--gray-500);
  }

  .btn-sm-ghost:hover {
    color: var(--gray-700);
    background: var(--gray-50);
  }

  /* [#22] Snooze button */
  .btn-sm-snooze {
    background: transparent;
    color: var(--gray-500);
  }

  .btn-sm-snooze:hover {
    color: var(--amber-600);
    background: var(--amber-50);
  }

  .btn-sm-primary {
    background: var(--purple-600);
    color: var(--white);
  }

  .btn-sm-primary:hover { background: var(--purple-700); }
  .btn-sm-primary:active { background: var(--purple-800); }

  .btn-sm-amber {
    background: var(--amber-500);
    color: var(--white);
  }

  .btn-sm-amber:hover { background: var(--amber-600); }


  /* ── 4. Feature Spotlight ── */

  .spotlight-anchor {
    position: relative;
    display: inline-flex;
  }

  .spotlight-dot {
    position: absolute;
    top: -3px;
    right: -3px;
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--blue-500);
    border: 2px solid var(--white);
    z-index: 2;
    cursor: pointer;
    animation: spotlightPulse 2s ease infinite;
  }

  @keyframes spotlightPulse {
    0%, 100% { box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.3); }
    50%      { box-shadow: 0 0 0 6px rgba(59, 130, 246, 0); }
  }

  .spotlight-popover {
    position: absolute;
    bottom: calc(100% + 12px);
    right: 0;
    width: 280px;
    background: var(--white);
    border: 1px solid var(--gray-200);
    border-left: 3px solid var(--blue-500);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-lg);
    padding: var(--sp-4);
    z-index: 30;
    opacity: 0;
    pointer-events: none;
    transform: translateY(4px);
    transition: all 0.2s ease;
  }

  .spotlight-popover.is-visible {
    opacity: 1;
    pointer-events: auto;
    transform: translateY(0);
  }

  .spotlight-popover::after {
    content: '';
    position: absolute;
    bottom: -5px;
    right: 16px;
    width: 8px;
    height: 8px;
    background: var(--white);
    border-right: 1px solid var(--gray-200);
    border-bottom: 1px solid var(--gray-200);
    transform: rotate(45deg);
  }

  .spotlight-source {
    display: flex;
    align-items: center;
    gap: var(--sp-1);
    font-size: var(--text-xs);
    font-weight: 600;
    color: var(--blue-600);
    margin-bottom: var(--sp-2);
  }

  .spotlight-source svg { width: 12px; height: 12px; }

  .spotlight-title {
    font-size: var(--text-sm);
    font-weight: 600;
    color: var(--gray-900);
    line-height: var(--leading-tight);
    margin-bottom: var(--sp-1);
  }

  .spotlight-desc {
    font-size: var(--text-sm);
    color: var(--gray-500);
    line-height: var(--leading-normal);
    margin-bottom: var(--sp-3);
  }

  .spotlight-actions {
    display: flex;
    align-items: center;
    gap: var(--sp-2);
    justify-content: flex-end;
  }

  .spotlight-btn {
    padding: 5px var(--sp-3);
    font-size: var(--text-xs);
    font-weight: 500;
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: all 0.15s ease;
    border: none;
  }

  .spotlight-btn-ghost {
    background: transparent;
    color: var(--gray-500);
  }

  .spotlight-btn-ghost:hover { color: var(--gray-600); background: var(--gray-50); }

  .spotlight-btn-primary {
    background: var(--blue-500);
    color: var(--white);
  }

  .spotlight-btn-primary:hover { background: var(--blue-600); }


  /* ═══════════════════════════════════════════
     v3 ADDITIONS — Research Findings Applied
     ═══════════════════════════════════════════ */

  /* [#23] Undo Toast — Agentic execution feedback */
  .undo-toast {
    position: fixed;
    bottom: var(--sp-6);
    left: 50%;
    transform: translateX(-50%) translateY(20px);
    background: var(--gray-900);
    color: var(--white);
    padding: var(--sp-3) var(--sp-5);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-xl);
    display: flex;
    align-items: center;
    gap: var(--sp-4);
    z-index: 100;
    opacity: 0;
    pointer-events: none;
    transition: all 0.25s cubic-bezier(0.16, 1, 0.3, 1);
    font-size: var(--text-sm);
    min-width: 340px;
  }

  .undo-toast.is-visible {
    opacity: 1;
    pointer-events: auto;
    transform: translateX(-50%) translateY(0);
  }

  .undo-toast-icon {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: var(--green-600);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }

  .undo-toast-icon svg { width: 12px; height: 12px; color: var(--white); }

  .undo-toast-text {
    flex: 1;
    font-weight: 500;
  }

  .undo-toast-text span {
    color: var(--gray-400);
    font-weight: 400;
  }

  .undo-toast-btn {
    background: transparent;
    border: 1px solid rgba(255,255,255,0.2);
    color: var(--white);
    padding: var(--sp-1) var(--sp-3);
    border-radius: var(--radius-sm);
    font-size: var(--text-sm);
    font-weight: 600;
    cursor: pointer;
    transition: all 0.15s ease;
    white-space: nowrap;
  }

  .undo-toast-btn:hover {
    background: rgba(255,255,255,0.1);
    border-color: rgba(255,255,255,0.3);
  }

  .undo-toast-timer {
    width: 100%;
    height: 2px;
    background: rgba(255,255,255,0.1);
    border-radius: 1px;
    position: absolute;
    bottom: 0;
    left: 0;
    overflow: hidden;
  }

  .undo-toast-timer-fill {
    height: 100%;
    background: var(--purple-400);
    border-radius: 1px;
    transition: width linear;
  }


  /* ── Demo Controls ── */
  .demo-controls {
    position: fixed;
    top: var(--sp-4);
    right: var(--sp-4);
    background: var(--gray-900);
    border-radius: var(--radius-lg);
    padding: var(--sp-4);
    z-index: 100;
    box-shadow: var(--shadow-xl);
    display: flex;
    flex-direction: column;
    gap: var(--sp-2);
    min-width: 220px;
  }

  .demo-controls-title {
    font-size: var(--text-xs);
    font-weight: 600;
    color: var(--gray-400);
    text-transform: uppercase;
    letter-spacing: var(--tracking-wide);
    margin-bottom: var(--sp-1);
  }

  .demo-toggle {
    display: flex;
    align-items: center;
    gap: var(--sp-3);
    padding: var(--sp-2) var(--sp-3);
    background: rgba(255,255,255,0.06);
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: var(--radius-sm);
    cursor: pointer;
    transition: all 0.15s ease;
  }

  .demo-toggle:hover {
    background: rgba(255,255,255,0.1);
    border-color: rgba(255,255,255,0.15);
  }

  .demo-toggle.is-active {
    background: rgba(147,51,234,0.15);
    border-color: rgba(147,51,234,0.3);
  }

  .demo-toggle-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--gray-600);
    flex-shrink: 0;
    transition: background 0.15s ease;
  }

  .demo-toggle.is-active .demo-toggle-dot { background: var(--purple-400); }

  .demo-toggle-label {
    font-size: var(--text-sm);
    color: var(--gray-300);
    font-weight: 500;
  }

  .demo-toggle.is-active .demo-toggle-label { color: var(--white); }

  /* Hide/show logic */
  .insight-banner.is-hidden,
  .suggestion-card.is-hidden { display: none; }

  tr.row.has-nudge.nudge-hidden > td:first-child { border-left: none; }
  tr.row.has-nudge.nudge-hidden .row-nudge-indicator { display: none; }

  .spotlight-dot.is-hidden { display: none; }

  /* Snooze animation */
  @keyframes snoozeOut {
    from { opacity: 1; transform: scale(1); }
    to   { opacity: 0; transform: scale(0.95) translateY(8px); }
  }

  .suggestion-card.is-snoozed {
    animation: snoozeOut 0.2s ease forwards;
  }
</style>
</head>
<body>

<div class="app">
  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="sidebar-brand">
      <h2>Lais da Imobiliária X</h2>
      <div class="brand-phone">+55 11 98765-4321</div>
      <button class="sidebar-collapse" aria-label="Recolher menu">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"/></svg>
      </button>
    </div>

    <nav class="sidebar-nav">
      <a href="#" class="nav-item">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
        Inicio
      </a>
      <a href="#" class="nav-item active">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
        Leads
      </a>
      <a href="#" class="nav-item">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>
        Relatorio
      </a>
      <a href="#" class="nav-item">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
        Minha Lais
      </a>
      <a href="#" class="nav-item">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
        Ajuda
      </a>
    </nav>

    <div class="sidebar-footer">
      <div class="user-profile">
        <div class="user-avatar">CM</div>
        <div class="user-info">
          <div class="user-name">Ceboline Mitu</div>
          <div class="user-role">Administrador</div>
        </div>
        <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>
      </div>
    </div>
  </aside>

  <!-- Main Content -->
  <div class="main">
    <div class="header">
      <div class="header-left">
        <h1>Leads</h1>
        <p>Interacoes que podem originar clientes atendidos</p>
      </div>
      <div class="header-actions">
        <button class="btn btn-ghost">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="4" y1="21" x2="4" y2="14"/><line x1="4" y1="10" x2="4" y2="3"/><line x1="12" y1="21" x2="12" y2="12"/><line x1="12" y1="8" x2="12" y2="3"/><line x1="20" y1="21" x2="20" y2="16"/><line x1="20" y1="12" x2="20" y2="3"/></svg>
          Filtros
        </button>
        <button class="btn btn-ghost">
          Ordenar
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg>
        </button>
      </div>
    </div>

    <!-- [#19] Banners now have "Por que?" reasoning links -->
    <div class="insight-banner is-hidden" data-type="urgent" id="banner-urgent">
      <div class="insight-banner-icon">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
      </div>
      <div class="insight-banner-body">
        <div class="insight-banner-text">
          <strong>3 leads sem resposta ha mais de 24h.</strong> Leads de portais convertem 2,3x mais quando respondidos no mesmo dia.
        </div>
        <button class="reasoning-link" onclick="this.nextElementSibling.classList.toggle('is-visible')">
          Por que estou vendo isso?
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
        </button>
        <div class="reasoning-expanded">
          Baseado em 139 leads ativos, 3 nao receberam resposta em 24h. Dados do Grupo Zap mostram que tempo de resposta e o fator #1 na conversao de leads de portais imobiliarios.
        </div>
      </div>
      <button class="insight-banner-action">Filtrar nao respondidos</button>
      <button class="insight-banner-dismiss" onclick="this.closest('.insight-banner').classList.add('is-hidden')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
      </button>
    </div>

    <div class="insight-banner is-hidden" data-type="ai" id="banner-ai">
      <div class="insight-banner-icon">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2L14.09 8.26L20 9.27L15.55 13.97L16.91 20L12 16.9L7.09 20L8.45 13.97L4 9.27L9.91 8.26L12 2Z"/></svg>
      </div>
      <div class="insight-banner-body">
        <div class="insight-banner-text">
          <strong>Seu tempo de resposta melhorou 28% esta semana.</strong> Continue assim — corretores com tempo &lt;2h fecham 40% mais negocios.
        </div>
        <button class="reasoning-link" onclick="this.nextElementSibling.classList.toggle('is-visible')">
          Por que estou vendo isso?
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
        </button>
        <div class="reasoning-expanded">
          Comparando sua media de resposta desta semana (1h42) com a semana anterior (2h21). Baseado em dados de 2.400 corretores da plataforma, tempo de resposta &lt;2h correlaciona com 40% mais fechamentos.
        </div>
      </div>
      <button class="insight-banner-action">Ver relatorio de resposta</button>
      <button class="insight-banner-dismiss" onclick="this.closest('.insight-banner').classList.add('is-hidden')">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
      </button>
    </div>

    <div class="table-section">
      <div class="table-meta">
        <div class="table-count">Exibindo <strong>139</strong> leads</div>
      </div>

      <div class="table-container">
        <div class="table-scroll">
          <table>
            <thead>
              <tr>
                <th class="col-check"><span class="check"><input type="checkbox" aria-label="Selecionar todos" id="select-all"></span></th>
                <th>Lead</th>
                <th>Contato</th>
                <th>Imovel</th>
                <th>Canal</th>
                <th>CRM</th>
                <th class="col-actions"><span class="sr-only">Acoes</span></th>
              </tr>
            </thead>
            <tbody>
              <!-- Row 1 — Novo lead, urgency nudge with confidence -->
              <tr class="row has-nudge nudge-urgent nudge-hidden" id="row-mariana">
                <td><span class="check"><input type="checkbox" class="row-checkbox" aria-label="Selecionar Mariana Costa"></span></td>
                <td>
                  <div class="lead-cell">
                    <span class="lead-name">Mariana Costa</span>
                    <span class="lead-status status-novo"><span class="dot"></span>Novo</span>
                    <div class="row-nudge-indicator">
                      <span class="row-nudge-badge nudge-urgent">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                        Esperando ha 3h
                      </span>
                      <div class="row-nudge-popover">
                        <!-- [#18] Confidence badge in popover header -->
                        <div class="nudge-popover-header">
                          <div class="nudge-popover-source">
                            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2L14.09 8.26L20 9.27L15.55 13.97L16.91 20L12 16.9L7.09 20L8.45 13.97L4 9.27L9.91 8.26L12 2Z"/></svg>
                            Sugestao da Lais
                          </div>
                          <span class="confidence-badge confidence-high">91%</span>
                        </div>
                        <div class="nudge-popover-text">
                          <strong>Mariana</strong> esta esperando resposta desde 09:14. Leads do Grupo Zap que nao recebem resposta em 4h tem <strong>70% de chance de ir para outro corretor</strong>.
                        </div>
                        <div class="nudge-popover-stat">
                          <div>
                            <div class="nudge-popover-stat-value">3h12</div>
                            <div class="nudge-popover-stat-label">tempo de espera</div>
                          </div>
                          <div>
                            <div class="nudge-popover-stat-value val-warning">4h</div>
                            <div class="nudge-popover-stat-label">limite critico</div>
                          </div>
                        </div>
                        <!-- [#23] Agentic CTA -->
                        <button class="nudge-popover-action" onclick="showUndoToast('Mensagem enviada para Mariana Costa')">Responder agora</button>
                      </div>
                    </div>
                  </div>
                </td>
                <td>
                  <div class="contact-cell">
                    <span class="contact-phone">11 99432-1087</span>
                    <span class="contact-email">mariana.costa@gmail.com</span>
                  </div>
                </td>
                <td><span class="property-empty">—</span></td>
                <td>
                  <div class="channel-cell">
                    <span class="channel-name">Grupo Zap</span>
                    <span class="channel-date">12/02/2026, 09:14</span>
                  </div>
                </td>
                <td>
                  <div class="crm-cell">
                    <span class="crm-badge not-sent">Nao enviado</span>
                    <span class="crm-detail">Aguardando atendimento</span>
                  </div>
                </td>
                <td>
                  <div class="row-actions">
                    <button class="action-btn" aria-label="Conversa"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg></button>
                    <button class="action-btn" aria-label="Copiar"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg></button>
                    <button class="action-btn" aria-label="Compartilhar"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/></svg></button>
                  </div>
                </td>
              </tr>

              <!-- Row 2 -->
              <tr class="row">
                <td><span class="check"><input type="checkbox" class="row-checkbox" aria-label="Selecionar Rafael Oliveira"></span></td>
                <td><div class="lead-cell"><span class="lead-name">Rafael Oliveira</span><span class="lead-status status-atendido"><span class="dot"></span>Atendido</span></div></td>
                <td><div class="contact-cell"><span class="contact-phone">11 98765-4321</span><span class="contact-email">rafael.oliveira@hotmail.com</span></div></td>
                <td><div class="property-cell"><span class="property-type">Venda</span><span class="property-ref">#128740</span></div></td>
                <td><div class="channel-cell"><span class="channel-name">Grupo Zap</span><span class="channel-date">11/02/2026, 16:45</span></div></td>
                <td><div class="crm-cell"><span class="crm-badge sent">Enviado</span><span class="crm-detail">Lais em 11/02/2026</span></div></td>
                <td><div class="row-actions"><button class="action-btn" aria-label="Conversa"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg></button><button class="action-btn" aria-label="Copiar"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg></button><button class="action-btn" aria-label="Compartilhar"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/></svg></button></div></td>
              </tr>

              <!-- Row 3 -->
              <tr class="row">
                <td><span class="check"><input type="checkbox" class="row-checkbox" aria-label="Selecionar Juliana Mendes"></span></td>
                <td><div class="lead-cell"><span class="lead-name">Juliana Mendes</span><span class="lead-status status-atendido"><span class="dot"></span>Atendido</span></div></td>
                <td><div class="contact-cell"><span class="contact-phone">11 97654-3210</span><span class="contact-email">ju.mendes@outlook.com</span></div></td>
                <td><div class="property-cell"><span class="property-type">Locacao</span><span class="property-ref">#095312</span></div></td>
                <td><div class="channel-cell"><span class="channel-name">Grupo Zap</span><span class="channel-date">11/02/2026, 14:20</span></div></td>
                <td><div class="crm-cell"><span class="crm-badge sent">Enviado</span><span class="crm-detail">Automaticamente em 11/02/2026</span></div></td>
                <td><div class="row-actions"><button class="action-btn" aria-label="Conversa"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg></button><button class="action-btn" aria-label="Copiar"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg></button><button class="action-btn" aria-label="Compartilhar"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/></svg></button></div></td>
              </tr>

              <!-- Row 4 — Em atendimento, opportunity nudge with confidence -->
              <tr class="row has-nudge nudge-opportunity nudge-hidden" id="row-pedro">
                <td><span class="check"><input type="checkbox" class="row-checkbox" aria-label="Selecionar Pedro Santos"></span></td>
                <td>
                  <div class="lead-cell">
                    <span class="lead-name">Pedro Santos</span>
                    <span class="lead-status status-em-atendimento"><span class="dot"></span>Em atendimento</span>
                    <div class="row-nudge-indicator">
                      <span class="row-nudge-badge nudge-opportunity">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
                        Pronto para follow-up
                      </span>
                      <div class="row-nudge-popover">
                        <div class="nudge-popover-header">
                          <div class="nudge-popover-source">
                            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2L14.09 8.26L20 9.27L15.55 13.97L16.91 20L12 16.9L7.09 20L8.45 13.97L4 9.27L9.91 8.26L12 2Z"/></svg>
                            Sugestao da Lais
                          </div>
                          <span class="confidence-badge confidence-high">87%</span>
                        </div>
                        <div class="nudge-popover-text">
                          <strong>Pedro</strong> visitou o imovel #082147 ontem. Leads que recebem follow-up em ate <strong>24h apos a visita</strong> fecham 3x mais.
                        </div>
                        <div class="nudge-popover-stat">
                          <div>
                            <div class="nudge-popover-stat-value val-good">18h</div>
                            <div class="nudge-popover-stat-label">desde a visita</div>
                          </div>
                          <div>
                            <div class="nudge-popover-stat-value">24h</div>
                            <div class="nudge-popover-stat-label">janela ideal</div>
                          </div>
                        </div>
                        <button class="nudge-popover-action" onclick="showUndoToast('Follow-up enviado para Pedro Santos')">Enviar follow-up</button>
                      </div>
                    </div>
                  </div>
                </td>
                <td><div class="contact-cell"><span class="contact-phone">11 96543-2109</span><span class="contact-email">pedro.santos@icloud.com</span></div></td>
                <td><div class="property-cell"><span class="property-type">Locacao</span><span class="property-ref">#082147</span></div></td>
                <td><div class="channel-cell"><span class="channel-name">OLX</span><span class="channel-date">11/02/2026, 10:33</span></div></td>
                <td><div class="crm-cell"><span class="crm-badge not-sent">Nao enviado</span><span class="crm-detail">Conversa em andamento</span></div></td>
                <td><div class="row-actions"><button class="action-btn" aria-label="Conversa"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg></button><button class="action-btn" aria-label="Copiar"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg></button><button class="action-btn" aria-label="Compartilhar"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/></svg></button></div></td>
              </tr>

              <!-- Row 5 -->
              <tr class="row">
                <td><span class="check"><input type="checkbox" class="row-checkbox" aria-label="Selecionar Ana Beatriz Lima"></span></td>
                <td><div class="lead-cell"><span class="lead-name">Ana Beatriz Lima</span><span class="lead-status status-atendido"><span class="dot"></span>Atendido</span></div></td>
                <td><div class="contact-cell"><span class="contact-phone">11 95432-1098</span><span class="contact-email">anabeatriz.lima@yahoo.com.br</span></div></td>
                <td><div class="property-cell"><span class="property-type">Venda</span><span class="property-ref">#143891</span></div></td>
                <td><div class="channel-cell"><span class="channel-name">Viva Real</span><span class="channel-date">10/02/2026, 18:02</span></div></td>
                <td><div class="crm-cell"><span class="crm-badge sent">Enviado</span><span class="crm-detail">Automaticamente em 10/02/2026</span></div></td>
                <td><div class="row-actions"><button class="action-btn" aria-label="Conversa"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg></button><button class="action-btn" aria-label="Copiar"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg></button><button class="action-btn" aria-label="Compartilhar"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/></svg></button></div></td>
              </tr>

              <!-- Row 6 -->
              <tr class="row">
                <td><span class="check"><input type="checkbox" class="row-checkbox" aria-label="Selecionar Lucas Ferreira"></span></td>
                <td><div class="lead-cell"><span class="lead-name">Lucas Ferreira</span><span class="lead-status status-atendido"><span class="dot"></span>Atendido</span></div></td>
                <td><div class="contact-cell"><span class="contact-phone">11 94321-0987</span><span class="contact-email">lucas.ferreira@gmail.com</span></div></td>
                <td><div class="property-cell"><span class="property-type">Locacao</span><span class="property-ref">#067523</span></div></td>
                <td><div class="channel-cell"><span class="channel-name">Grupo Zap</span><span class="channel-date">10/02/2026, 11:47</span></div></td>
                <td><div class="crm-cell"><span class="crm-badge sent">Enviado</span><span class="crm-detail">Lais em 10/02/2026</span></div></td>
                <td><div class="row-actions"><button class="action-btn" aria-label="Conversa"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg></button><button class="action-btn" aria-label="Copiar"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg></button><button class="action-btn" aria-label="Compartilhar"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/></svg></button></div></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Bottom Bar -->
    <div class="bottom-bar" id="bottom-bar">
      <span class="selection-count" id="selection-count">0 selecionados</span>
      <button class="btn btn-secondary bulk-action">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
        Baixar selecionados
      </button>
      <button class="btn btn-primary bulk-action">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"/><polygon points="22 2 15 22 11 13 2 9 22 2"/></svg>
        Enviar selecionados
      </button>

      <span class="spotlight-anchor" id="spotlight-remarketing">
        <button class="btn btn-outline-primary">Programar remarketing</button>
        <span class="spotlight-dot is-hidden" id="spotlight-dot" onclick="document.getElementById('spotlight-popover').classList.toggle('is-visible')"></span>
        <div class="spotlight-popover" id="spotlight-popover">
          <div class="spotlight-source">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2L14.09 8.26L20 9.27L15.55 13.97L16.91 20L12 16.9L7.09 20L8.45 13.97L4 9.27L9.91 8.26L12 2Z"/></svg>
            Recurso sugerido
          </div>
          <div class="spotlight-title">Remarketing automatico</div>
          <div class="spotlight-desc">Leads que nao responderam em 48h podem receber uma mensagem automatica. Imobiliarias que usam remarketing recuperam 18% dos leads inativos.</div>
          <div class="spotlight-actions">
            <button class="spotlight-btn spotlight-btn-ghost" onclick="document.getElementById('spotlight-popover').classList.remove('is-visible')">Depois</button>
            <button class="spotlight-btn spotlight-btn-primary">Configurar</button>
          </div>
        </div>
      </span>

      <button class="btn btn-ghost">Como funciona?</button>
    </div>
  </div>
</div>

<!-- Suggestion Cards Tray -->
<div class="suggestion-tray">

  <!-- [#21] Fatigue counter -->
  <div class="fatigue-counter is-visible" id="fatigue-counter">2 de 3 sugestoes hoje</div>

  <!-- Card 1: Stale listings — with confidence, feedback, snooze, agentic CTA -->
  <div class="suggestion-card is-hidden" id="card-stale">
    <div class="suggestion-card-accent accent-ai"></div>
    <div class="suggestion-card-inner">
      <div class="suggestion-card-header">
        <div class="suggestion-card-icon icon-ai">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>
        </div>
        <div class="suggestion-card-content">
          <div class="suggestion-card-source source-ai">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2L14.09 8.26L20 9.27L15.55 13.97L16.91 20L12 16.9L7.09 20L8.45 13.97L4 9.27L9.91 8.26L12 2Z"/></svg>
            Sugestao da Lais
            <!-- [#18] Confidence badge -->
            <span class="confidence-badge confidence-high">89%</span>
          </div>
          <div class="suggestion-card-title">12 anuncios precisam de atualizacao</div>
          <div class="suggestion-card-desc">Imoveis publicados ha mais de 30 dias perdem 60% da visibilidade nos portais.</div>
        </div>
        <button class="suggestion-card-close" onclick="this.closest('.suggestion-card').classList.add('is-hidden')">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        </button>
      </div>
      <div class="suggestion-card-data">
        <div class="data-point">
          <div class="data-point-value val-warning">12</div>
          <div class="data-point-label">anuncios &gt;30 dias</div>
        </div>
        <div class="data-point">
          <div class="data-point-value">47</div>
          <div class="data-point-label">total na prateleira</div>
        </div>
        <div class="data-point">
          <div class="data-point-value val-warning">26%</div>
          <div class="data-point-label">desatualizados</div>
          <div class="data-bar"><div class="data-bar-fill fill-warning" style="width: 26%"></div></div>
        </div>
      </div>
      <!-- [#19] Reasoning link -->
      <button class="reasoning-link" onclick="this.nextElementSibling.classList.toggle('is-visible')" style="margin-bottom: var(--sp-3)">
        Por que estou vendo isso?
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
      </button>
      <div class="reasoning-expanded" style="margin-bottom: var(--sp-3)">
        Baseado na data de publicacao dos seus 47 anuncios ativos. Portais como Grupo Zap e Viva Real reduzem a visibilidade de anuncios com mais de 30 dias sem atualizacao. Atualizar fotos e descricao renova o posicionamento.
      </div>
      <div class="suggestion-card-actions">
        <!-- [#20] Feedback buttons -->
        <div class="suggestion-feedback">
          <button class="feedback-btn" aria-label="Util" onclick="toggleFeedback(this, 'up')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"/></svg>
          </button>
          <button class="feedback-btn" aria-label="Nao util" onclick="toggleFeedback(this, 'down')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17"/></svg>
          </button>
        </div>
        <div class="suggestion-card-action-group">
          <!-- [#22] Snooze option -->
          <button class="btn-sm btn-sm-snooze" onclick="snoozeCard(this.closest('.suggestion-card'))">Lembrar depois</button>
          <!-- [#23] Agentic CTA -->
          <button class="btn-sm btn-sm-primary" onclick="showUndoToast('Atualizacao programada para 12 anuncios')">Atualizar agora</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Card 2: Batch opportunity — with confidence, feedback, snooze -->
  <div class="suggestion-card is-hidden" id="card-batch">
    <div class="suggestion-card-accent accent-green"></div>
    <div class="suggestion-card-inner">
      <div class="suggestion-card-header">
        <div class="suggestion-card-icon icon-green">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
        </div>
        <div class="suggestion-card-content">
          <div class="suggestion-card-source source-green">
            <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2L14.09 8.26L20 9.27L15.55 13.97L16.91 20L12 16.9L7.09 20L8.45 13.97L4 9.27L9.91 8.26L12 2Z"/></svg>
            Oportunidade
            <span class="confidence-badge confidence-medium">72%</span>
          </div>
          <div class="suggestion-card-title">8 leads do Viva Real esta semana</div>
          <div class="suggestion-card-desc">Grupo de remarketing para leads do mesmo portal tem taxa de resposta 25% maior.</div>
        </div>
        <button class="suggestion-card-close" onclick="this.closest('.suggestion-card').classList.add('is-hidden')">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
        </button>
      </div>
      <div class="suggestion-card-data">
        <div class="data-point">
          <div class="data-point-value val-accent">8</div>
          <div class="data-point-label">leads Viva Real</div>
        </div>
        <div class="data-point">
          <div class="data-point-value val-good">5</div>
          <div class="data-point-label">com imovel</div>
        </div>
        <div class="data-point">
          <div class="data-point-value">3</div>
          <div class="data-point-label">sem resposta</div>
          <div class="data-bar"><div class="data-bar-fill fill-accent" style="width: 38%"></div></div>
        </div>
      </div>
      <button class="reasoning-link" onclick="this.nextElementSibling.classList.toggle('is-visible')" style="margin-bottom: var(--sp-3)">
        Por que estou vendo isso?
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="6 9 12 15 18 9"/></svg>
      </button>
      <div class="reasoning-expanded" style="margin-bottom: var(--sp-3)">
        Detectamos 8 leads originados do Viva Real nos ultimos 7 dias. Dados de 340 imobiliarias mostram que remarketing agrupado por canal tem 25% mais respostas que mensagens individuais. Confianca moderada (72%) porque 3 leads ainda nao interagiram.
      </div>
      <div class="suggestion-card-actions">
        <div class="suggestion-feedback">
          <button class="feedback-btn" aria-label="Util" onclick="toggleFeedback(this, 'up')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"/></svg>
          </button>
          <button class="feedback-btn" aria-label="Nao util" onclick="toggleFeedback(this, 'down')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10 15v4a3 3 0 0 0 3 3l4-9V2H5.72a2 2 0 0 0-2 1.7l-1.38 9a2 2 0 0 0 2 2.3zm7-13h2.67A2.31 2.31 0 0 1 22 4v7a2.31 2.31 0 0 1-2.33 2H17"/></svg>
          </button>
        </div>
        <div class="suggestion-card-action-group">
          <button class="btn-sm btn-sm-snooze" onclick="snoozeCard(this.closest('.suggestion-card'))">Lembrar depois</button>
          <button class="btn-sm btn-sm-primary" onclick="showUndoToast('Grupo de remarketing criado com 8 leads')">Criar grupo</button>
        </div>
      </div>
    </div>
  </div>

</div>


<!-- [#23] Undo Toast -->
<div class="undo-toast" id="undo-toast">
  <div class="undo-toast-icon">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
  </div>
  <div class="undo-toast-text" id="undo-toast-text">Acao executada</div>
  <button class="undo-toast-btn" onclick="hideUndoToast()">Desfazer</button>
  <div class="undo-toast-timer"><div class="undo-toast-timer-fill" id="undo-timer-fill"></div></div>
</div>


<!-- Demo Controls Panel -->
<div class="demo-controls">
  <div class="demo-controls-title">Smart Suggestions v3</div>

  <div class="demo-toggle" data-target="banner" onclick="toggleDemo(this, 'banner')">
    <div class="demo-toggle-dot"></div>
    <div class="demo-toggle-label">Insight Banners</div>
  </div>

  <div class="demo-toggle" data-target="nudges" onclick="toggleDemo(this, 'nudges')">
    <div class="demo-toggle-dot"></div>
    <div class="demo-toggle-label">Row Nudges</div>
  </div>

  <div class="demo-toggle" data-target="cards" onclick="toggleDemo(this, 'cards')">
    <div class="demo-toggle-dot"></div>
    <div class="demo-toggle-label">Suggestion Cards</div>
  </div>

  <div class="demo-toggle" data-target="spotlight" onclick="toggleDemo(this, 'spotlight')">
    <div class="demo-toggle-dot"></div>
    <div class="demo-toggle-label">Feature Spotlight</div>
  </div>
</div>


<script>
// ── Demo toggle ──
function toggleDemo(el, type) {
  var isActive = el.classList.toggle('is-active');

  switch(type) {
    case 'banner':
      document.getElementById('banner-urgent').classList.toggle('is-hidden', !isActive);
      document.getElementById('banner-ai').classList.toggle('is-hidden', !isActive);
      break;

    case 'nudges':
      document.getElementById('row-mariana').classList.toggle('nudge-hidden', !isActive);
      document.getElementById('row-pedro').classList.toggle('nudge-hidden', !isActive);
      break;

    case 'cards':
      document.getElementById('card-stale').classList.toggle('is-hidden', !isActive);
      document.getElementById('card-batch').classList.toggle('is-hidden', !isActive);
      document.getElementById('fatigue-counter').classList.toggle('is-visible', isActive);
      break;

    case 'spotlight':
      document.getElementById('spotlight-dot').classList.toggle('is-hidden', !isActive);
      if (!isActive) {
        document.getElementById('spotlight-popover').classList.remove('is-visible');
      }
      break;
  }
}

// ── [#9] Checkbox selection ──
(function() {
  var bottomBar = document.getElementById('bottom-bar');
  var selectionCount = document.getElementById('selection-count');
  var selectAll = document.getElementById('select-all');
  var rowCheckboxes = document.querySelectorAll('.row-checkbox');

  function updateSelectionState() {
    var checked = document.querySelectorAll('.row-checkbox:checked');
    var count = checked.length;

    selectionCount.textContent = count + ' selecionado' + (count !== 1 ? 's' : '');

    if (count > 0) {
      bottomBar.classList.add('has-selection');
    } else {
      bottomBar.classList.remove('has-selection');
    }

    if (count === 0) {
      selectAll.checked = false;
      selectAll.indeterminate = false;
    } else if (count === rowCheckboxes.length) {
      selectAll.checked = true;
      selectAll.indeterminate = false;
    } else {
      selectAll.checked = false;
      selectAll.indeterminate = true;
    }
  }

  rowCheckboxes.forEach(function(cb) {
    cb.addEventListener('change', updateSelectionState);
  });

  selectAll.addEventListener('change', function() {
    rowCheckboxes.forEach(function(cb) {
      cb.checked = selectAll.checked;
    });
    updateSelectionState();
  });
})();


// ── [#20] Feedback toggle ──
function toggleFeedback(btn, direction) {
  var container = btn.closest('.suggestion-feedback');
  var buttons = container.querySelectorAll('.feedback-btn');

  // If already active, deactivate
  if (btn.classList.contains('active')) {
    btn.classList.remove('active');
    return;
  }

  // Deactivate siblings, activate this one
  buttons.forEach(function(b) { b.classList.remove('active'); });
  btn.classList.add('active');
}


// ── [#22] Snooze card ──
function snoozeCard(card) {
  card.classList.add('is-snoozed');

  // After animation, hide it and show it again after 5s (demo — real: 24h)
  setTimeout(function() {
    card.classList.add('is-hidden');
    card.classList.remove('is-snoozed');

    // Demo: re-show after 5 seconds to simulate "lembrar depois"
    setTimeout(function() {
      card.classList.remove('is-hidden');
    }, 5000);
  }, 200);
}


// ── [#23] Undo toast ──
var undoTimer = null;

function showUndoToast(message) {
  var toast = document.getElementById('undo-toast');
  var text = document.getElementById('undo-toast-text');
  var fill = document.getElementById('undo-timer-fill');

  text.textContent = message;
  fill.style.transition = 'none';
  fill.style.width = '100%';

  toast.classList.add('is-visible');

  // Start timer animation
  requestAnimationFrame(function() {
    requestAnimationFrame(function() {
      fill.style.transition = 'width 10s linear';
      fill.style.width = '0%';
    });
  });

  // Auto-hide after 10s
  clearTimeout(undoTimer);
  undoTimer = setTimeout(function() {
    hideUndoToast();
  }, 10000);
}

function hideUndoToast() {
  var toast = document.getElementById('undo-toast');
  toast.classList.remove('is-visible');
  clearTimeout(undoTimer);
}
</script>

</body>
</html>